{% load static %}
<!DOCTYPE html>
<html lang="en">
  <script>
    document.cookie = "js_enabled=true";
</script>
  {% include 'includes/head.html' %}

 

  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      {% include "includes/loader.html" %}
       {% include 'includes/topNavbar.html' %}
        {% include 'includes/sideNavbar.html' %}

      <div class="content-wrapper">


        {% include 'includes/message.html'  %}

       

       <section class="container-fluid">
        <div class="row justify-content-center">
        <div class="col-lg-12 mt-3">
          
          {% if user_responses %}
              {% for response in user_responses %}
                <div class="card shadow mb-3">

                  <h4 class="text-info m-4"> Response by {{ response.submitted_by }}</h4>
                  
                  <div class="card-body">
                    
                    <table class="table table-responsive">
                      <thead>
                        <tr>
                          <th>Question</th>
                          <th>Wight</th>
                          <th>Answer</th>
                          <th>Calculated</th>
                          <th>Document</th>
                          {% if response.status == 'pending'  %}
                            <th>Recomndation</th>
                          {% endif %}
                         
                        </tr>
                      </thead>
                      <tbody>
                        {% for answer in answers %}
                        <tr>
                            <td>{{ answer.forquestion }}</td>
                            <td>{{ answer.forquestion.weight }}</td>
                            <td>{{ answer.answertext }}</td>
                            <td> {{ answer.forquestion.weight}} {{answer.answertext }} </td>
                            
                            
                            <td>
                                {% for document in documents %}
                                    {% if document.foranswer == answer %}
                                        <a href="{{ document.document.url }}">{{ document }}</a>
                                   
                                    {% endif %}
                                {% endfor %}
                            </td>
                            {% if response.status == 'pending' %}
                                <td><input type="checkbox" name="input_{{ answer.id }}"></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                      </tbody>
                    </table>
                    {% if response.status == 'pending' %}
                        <a href="{% url "survey_managment:user_response_change_status" survey_id response_id %}" class="btn btn-primary p-2 mt-4"> Approve </a>
                    {% endif %}
                  </div>
                </div>
              {% endfor %}
            
          {% else %}
            <p style="font-size: 1.2rem;">No responses found.</p>
          {% endif %}
        </div>
      </div>
      </section>
      
      


      
      
      
    </div>

      <footer class="main-footer">
        <div class="float-right d-none d-sm-block"><b>Version</b> 3.2.0</div>
        reserved.
      </footer>
    </div>

    {% include 'includes/scripts.html' %}
  </body>

  <script>
  $(document).ready(function() {
    $('#accordion .collapse').on('show.bs.collapse', function () {
      $(this).prev().addClass('active');
    });

    $('#accordion .collapse').on('hide.bs.collapse', function () {
      $(this).prev().removeClass('active');
    });
  });
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</html>
